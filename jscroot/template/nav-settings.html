<div id="settings-section">
    <div class="welcome-section">
        <div class="has-text-centered">
            <h1 class="title is-3"><i class="fa fa-cog"></i> Settings</h1>
            <p class="subtitle">Configure your preferences</p>
        </div>
    </div>

    <div class="box">
        <h3 class="title is-4">Account Settings</h3>

        <div class="field">
            <label class="label">Change Password</label>
            <div class="control">
                <button class="button is-primary" onclick="changePassword()">
                    <i class="fa fa-key" style="margin-right: 0.5rem;"></i>
                    Change Password
                </button>
            </div>
        </div>

        <hr>

        <div class="field">
            <label class="label">Email Notifications</label>
            <div class="control">
                <label class="checkbox">
                    <input type="checkbox" id="emailNotif" checked>
                    Receive email notifications
                </label>
            </div>
        </div>

        <div class="field">
            <label class="label">Discord Notifications</label>
            <div class="control">
                <label class="checkbox">
                    <input type="checkbox" id="discordNotif">
                    Receive Discord notifications
                </label>
            </div>
            <p class="help">Requires Discord ID in your profile</p>
        </div>

        <hr>

        <div class="field">
            <label class="label">Theme</label>
            <div class="control">
                <div class="select">
                    <select id="themeSelect">
                        <option value="light">Light (Current)</option>
                        <option value="dark">Dark</option>
                        <option value="pink">Pink (Default)</option>
                    </select>
                </div>
            </div>
            <p class="help">Theme customization coming soon</p>
        </div>

        <hr>

        <div class="field">
            <label class="label">Danger Zone</label>
            <div class="control">
                <button class="button is-danger is-outlined" onclick="confirmLogout()">
                    <i class="fa fa-sign-out" style="margin-right: 0.5rem;"></i>
                    Logout
                </button>
            </div>
        </div>
    </div>

    <div class="box">
        <h3 class="title is-4">System Information</h3>
        <table class="table is-fullwidth">
            <tbody>
                <tr>
                    <td><strong>App Version</strong></td>
                    <td>1.0.0</td>
                </tr>
                <tr>
                    <td><strong>Backend Status</strong></td>
                    <td><span class="tag is-success">Online</span></td>
                </tr>
                <tr>
                    <td><strong>Last Login</strong></td>
                    <td id="lastLogin">-</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
function changePassword() {
    Swal.fire({
        title: 'Change Password',
        html: `
            <input type="password" id="currentPassword" class="swal2-input" placeholder="Current Password">
            <input type="password" id="newPassword" class="swal2-input" placeholder="New Password">
            <input type="password" id="confirmPassword" class="swal2-input" placeholder="Confirm New Password">
        `,
        showCancelButton: true,
        confirmButtonText: 'Change Password',
        confirmButtonColor: '#ff6b9d',
        preConfirm: () => {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (!currentPassword || !newPassword || !confirmPassword) {
                Swal.showValidationMessage('Please fill all fields');
                return false;
            }

            if (newPassword !== confirmPassword) {
                Swal.showValidationMessage('New passwords do not match');
                return false;
            }

            if (newPassword.length < 6) {
                Swal.showValidationMessage('Password must be at least 6 characters');
                return false;
            }

            return { currentPassword, newPassword };
        }
    }).then(async (result) => {
        if (result.isConfirmed) {
            // Implement password change API call here
            Swal.fire({
                title: 'Success!',
                text: 'Password change feature coming soon',
                icon: 'info',
                confirmButtonColor: '#ff6b9d'
            });
        }
    });
}

function confirmLogout() {
    Swal.fire({
        title: 'Logout?',
        text: 'Are you sure you want to logout?',
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Yes, Logout',
        cancelButtonText: 'Cancel',
        confirmButtonColor: '#ff6b9d'
    }).then((result) => {
        if (result.isConfirmed) {
            // Clear local storage
            localStorage.removeItem('gwa_access_token');
            localStorage.removeItem('gwa_refresh_token');
            localStorage.removeItem('gwa_user');
            document.cookie = 'login=; path=/; max-age=0';

            // Redirect to login
            window.location.href = 'login.html';
        }
    });
}

// Show last login time
document.getElementById('lastLogin').textContent = new Date().toLocaleString();
</script>
