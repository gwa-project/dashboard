<!DOCTYPE html>
<html lang="en" class="theme-light">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GWA Project - Dashboard</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <!-- Bulma Version 1-->
    <link rel="stylesheet" href="https://unpkg.com/bulma@1.0.2/css/bulma.min.css" />
    <style>
        .aside {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .aside .item {
            color: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .aside .item:hover, .aside .item.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .aside .item .icon {
            margin-right: 0.75rem;
            width: 20px;
        }
        .compose .button {
            background: linear-gradient(45deg, #ff6b6b, #ff8787);
            border: none;
            font-weight: 600;
        }
        .compose .button:hover {
            background: linear-gradient(45deg, #ff5252, #ff6b6b);
            transform: translateY(-2px);
        }
        .stats-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 1rem;
        }
        .stats-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
        }
        .stats-label {
            color: #6c757d;
            font-weight: 500;
        }
        .navbar-dropdown .navbar-item {
            cursor: pointer;
        }
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 8px;
        }
    </style>
</head>

<body>
    <nav class="navbar has-shadow">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item">
                    <i class="fa fa-shield" style="color: #667eea; margin-right: 8px;"></i>
                    <strong>GWA Project</strong>
                </a>

                <div class="navbar-burger burger" data-target="navMenu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <div class="navbar-menu" id="navMenu">
                <div class="navbar-end">
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a class="navbar-link">
                            <img id="userAvatar" class="user-avatar" src="https://via.placeholder.com/32x32?text=U" alt="User">
                            <span id="userName">Loading...</span>
                        </a>
                        <div class="navbar-dropdown">
                            <a class="navbar-item" onclick="navigateTo('profile')">
                                <i class="fa fa-user"></i>&nbsp; Profile
                            </a>
                            <a class="navbar-item" onclick="navigateTo('settings')">
                                <i class="fa fa-cog"></i>&nbsp; Settings
                            </a>
                            <hr class="navbar-divider">
                            <a class="navbar-item" onclick="logout()">
                                <i class="fa fa-sign-out"></i>&nbsp; Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="columns" id="dashboard-app">
        <aside class="column is-2 aside hero is-fullheight">
            <div>
                <div class="compose has-text-centered">
                    <a class="button is-danger is-block is-bold" onclick="navigateTo('new-project')">
                        <span class="compose">New Project</span>
                    </a>
                </div>
                <div class="main">
                    <a href="#" class="item active" onclick="navigateTo('dashboard')">
                        <span class="icon"><i class="fa fa-dashboard"></i></span>
                        <span class="name">Dashboard</span>
                    </a>
                    <a href="#" class="item" onclick="navigateTo('projects')">
                        <span class="icon"><i class="fa fa-folder"></i></span>
                        <span class="name">Projects</span>
                    </a>
                    <a href="#" class="item" onclick="navigateTo('users')">
                        <span class="icon"><i class="fa fa-users"></i></span>
                        <span class="name">Users</span>
                    </a>
                    <a href="#" class="item" onclick="navigateTo('analytics')">
                        <span class="icon"><i class="fa fa-bar-chart"></i></span>
                        <span class="name">Analytics</span>
                    </a>
                    <a href="#" class="item" onclick="navigateTo('settings')">
                        <span class="icon"><i class="fa fa-cog"></i></span>
                        <span class="name">Settings</span>
                    </a>
                </div>
            </div>
        </aside>

        <div class="column is-10 content-area">
            <!-- Dashboard Overview -->
            <div id="dashboard-content">
                <div class="section">
                    <div class="container">
                        <h1 class="title">Welcome to Dashboard</h1>
                        <p class="subtitle">Overview of your GWA Project</p>

                        <!-- Stats Cards -->
                        <div class="columns">
                            <div class="column is-3">
                                <div class="stats-card">
                                    <div class="stats-number" id="totalProjects">0</div>
                                    <div class="stats-label">Total Projects</div>
                                </div>
                            </div>
                            <div class="column is-3">
                                <div class="stats-card">
                                    <div class="stats-number" id="activeUsers">0</div>
                                    <div class="stats-label">Active Users</div>
                                </div>
                            </div>
                            <div class="column is-3">
                                <div class="stats-card">
                                    <div class="stats-number" id="completedTasks">0</div>
                                    <div class="stats-label">Completed Tasks</div>
                                </div>
                            </div>
                            <div class="column is-3">
                                <div class="stats-card">
                                    <div class="stats-number" id="systemHealth">98%</div>
                                    <div class="stats-label">System Health</div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="box">
                            <h2 class="title is-4">Recent Activity</h2>
                            <div id="recent-activity">
                                <div class="content">
                                    <p><i class="fa fa-check text-success"></i> System health check completed</p>
                                    <p><i class="fa fa-user text-info"></i> New user registered: <strong id="recentUser">Loading...</strong></p>
                                    <p><i class="fa fa-folder text-warning"></i> Project updated: Backend API</p>
                                    <p><i class="fa fa-shield text-primary"></i> Security scan completed successfully</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="box">
                            <h2 class="title is-4">Quick Actions</h2>
                            <div class="buttons">
                                <button class="button is-primary" onclick="navigateTo('new-project')">
                                    <span class="icon"><i class="fa fa-plus"></i></span>
                                    <span>Create Project</span>
                                </button>
                                <button class="button is-info" onclick="navigateTo('users')">
                                    <span class="icon"><i class="fa fa-users"></i></span>
                                    <span>Manage Users</span>
                                </button>
                                <button class="button is-success" onclick="navigateTo('analytics')">
                                    <span class="icon"><i class="fa fa-bar-chart"></i></span>
                                    <span>View Analytics</span>
                                </button>
                                <button class="button is-warning" onclick="refreshData()">
                                    <span class="icon"><i class="fa fa-refresh"></i></span>
                                    <span>Refresh Data</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="content has-text-centered">
                <p>
                    <strong>GWA Project Dashboard</strong> - Modern authentication and project management system.
                </p>
                <p>
                    Built with ❤️ using Go, MongoDB, and Google Cloud Platform.
                </p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        // Check authentication
        function checkAuth() {
            const token = localStorage.getItem('gwa_access_token') || getCookie('login');
            if (!token) {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // Get cookie helper
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return '';
        }

        // Load user data
        async function loadUserData() {
            try {
                const token = localStorage.getItem('gwa_access_token') || getCookie('login');

                // Update user info (placeholder for now)
                document.getElementById('userName').textContent = 'John Doe';
                document.getElementById('userAvatar').src = 'https://via.placeholder.com/32x32?text=JD';

                // Update stats with sample data
                animateCounter('totalProjects', 12);
                animateCounter('activeUsers', 34);
                animateCounter('completedTasks', 156);

                document.getElementById('recentUser').textContent = 'John Doe';

                console.log('Dashboard data loaded successfully');
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // Animate counters
        function animateCounter(elementId, target) {
            const element = document.getElementById(elementId);
            let current = 0;
            const increment = target / 30;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    element.textContent = target;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, 50);
        }

        // Navigation functions
        function navigateTo(section) {
            // Remove active class from all items
            document.querySelectorAll('.aside .item').forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to clicked item
            event.target.closest('.item')?.classList.add('active');

            // Handle navigation
            switch(section) {
                case 'profile':
                    alert('Profile page - To be implemented');
                    break;
                case 'settings':
                    alert('Settings page - To be implemented');
                    break;
                case 'new-project':
                    alert('New Project creation - To be implemented');
                    break;
                case 'projects':
                    alert('Projects management - To be implemented');
                    break;
                case 'users':
                    alert('Users management - To be implemented');
                    break;
                case 'analytics':
                    alert('Analytics dashboard - To be implemented');
                    break;
                default:
                    console.log('Navigating to:', section);
            }
        }

        // Refresh data
        function refreshData() {
            const button = event.target.closest('.button');
            button.classList.add('is-loading');

            setTimeout(() => {
                button.classList.remove('is-loading');
                loadUserData();
                alert('Data refreshed successfully!');
            }, 1500);
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Clear auth data
                localStorage.removeItem('gwa_access_token');
                document.cookie = 'login=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';

                // Redirect to home
                window.location.href = 'index.html';
            }
        }

        // Mobile navbar toggle
        $(document).ready(function() {
            // Check authentication
            if (!checkAuth()) return;

            // Load user data
            loadUserData();

            // Mobile burger menu
            $('.navbar-burger').click(function() {
                $('.navbar-burger').toggleClass('is-active');
                $('.navbar-menu').toggleClass('is-active');
            });

            console.log('Dashboard initialized successfully');
        });
    </script>
</body>
</html>